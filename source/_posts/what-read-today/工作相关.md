---
title: 今日阅读-工作相关内容
date: 2022-06-25 13:00:00
tags: what-read-today
---

> 记录日常读到的和工作相关的文章/链接
> 长期更新

# 缘起

虽然看过很多好文章, 但一直没找到整理的地方, 后续再找时也不方便. 最近翻 github 时看到了陶文整理的[今日阅读](https://github.com/taowen/awesome-lowcode/blob/master/%E4%BB%8A%E6%97%A5%E9%98%85%E8%AF%BB.md)文件, 记录每天看到的优秀文章, 贴下链接, 附一两句简单的评论, 感觉是一个不错的方案

一方面, 阅读经历本身不涉及关键隐私, 分享好文可以创造信息. 另一方面, 也可以作为外人了解我们的途径. 没有明显坏处但成本低有收益的事, 是可以做一做的.

故有此页面

- 2022 年 8 月 16 日
  - node 限制正则表达式回溯深度
    - `编译器`
    - V8 支持非回溯 RegExp 引擎
    - 在回溯模式下, 正则表达式会有很多分支情况，一个简单的正则都会形成几乎无限的分支情况, 导致系统崩溃
      - 例如`\s*$`, 曾经在 2019 年让 Cloudflare 全球服务挂了[半小时](https://blog.cloudflare.com/zh-cn/details-of-the-cloudflare-outage-on-july-2-2019-zh-cn/)
        - 回溯引发 CPU 无限运算的原因可以在文章中搜索`附录：关于正则表达式回溯`看到
        - 唯一真正的解决方案（除非完全重写模式以使其更具体）是使用这种回溯机制摆脱正则表达式引擎
        - 自 1968 年 Ken Thompson 写了一篇名为“编程技术：正则表达式搜索算法”(Programming Techniques:Regular expression search algorithm) 的论文以来，这一问题的解决方案早就广为人知。这篇论文介绍了一种机制，它可以将正则表达式转换为非确定性有限状态自动机 (NFA)，然后使用一种按匹配字符串大小的时间线性执行的算法，跟踪 NFA 中的状态转换。
    - 你可以通过下面的方式配置新的 RegExp 引擎：
    - `--enable-experimental-regexp_engine-on-excessive-backtracks`：在过多的回溯上启用对非回溯引擎的回退。
    - `--regexp-backtracks-before-fallback N`：（默认 N=50000）指定了多少回溯被视为过多，即何时进行回退。
    - `--enable-experimental-regexp-engine` 直接启用非回溯 RegExp 引擎。
    - 在 v8 引擎 v8.8 版本/chrome 88 版本/Node.js 16.0.0 之后有效([nodejs&v8 对应关系](https://nodejs.org/zh-cn/download/releases/))
    - [v8 团队对此的介绍](https://v8.dev/blog/non-backtracking-regexp)
    - 测试代码
      ```js
      // 测试代码
      let startAt = Date.now();
      console.log("start => ", startAt);
      let c = /(a*)*b/.exec("a".repeat(100));
      let endAt = Date.now();
      console.log("end => ", endAt);
      console.log("during => ", endAt - startAt);
      // 对于node index.js而言, 会无限执行下去
      // 实际输出=>
      // start =>  1660631614480
      // ------------------------
      // 对 node --enable-experimental-regexp_engine-on-excessive-backtracks --regexp-backtracks-before-fallback=1000 dist/index.js 而言, 只需要6ms
      // 实际输出 =>
      // start =>  1660631608399
      // end =>  1660631608405
      // during =>  6
      ```
  - 深入理解 Promise 五部曲
    - `科普`
    - 基本思路和你不知道的 JavaScript 中一致, 可以视为简版, 分为如下 5 篇
      - [[译] 深入理解 Promise 五部曲：1. 异步问题](https://segmentfault.com/a/1190000000586666)
      - [[译] 深入理解 Promise 五部曲：2. 控制权转换问题](https://segmentfault.com/a/1190000000591382)
      - [[译] 深入理解 Promise 五部曲：3. 可靠性问题](https://segmentfault.com/a/1190000000593885)
      - [[译] 深入理解 Promise 五部曲：4. 扩展问题](https://segmentfault.com/a/1190000000600268)
      - [[译] 深入理解 Promise 五部曲：5. LEGO](https://segmentfault.com/a/1190000000611040)
    - 查了一下, 文章作者是 Getify, 最后提的 Promise 解决方案叫 asynquence
    - 这个人后来搞了个 Github 15.8w star 的仓库存文章, 仓库名叫[You-Dont-Know-JS](https://github.com/getify/You-Dont-Know-JS)
- 2022 年 8 月 12 日
  - [身份证号的末位校验码算法最后一步模 11 是基于什么考虑？](https://www.zhihu.com/question/20205184/answer/223049155)
    - `密码学`&`实际应用`
    - 利用 1~11 的最后一位做校验位(对应于 0~9+X), 可以直接检验出以下错误
      1.  有一个数填错了。
      2.  相邻两位填反了。
      3.  如果有 2 个以上的位填写错误，而填写错误不是刻意而为之，而是随机填错了的话，则身份证校验算法能够检测出错误的概率为 90%
    - 关联回答: [身份证号包含「X」而不是纯数字，是不是一个失败设计？](https://www.zhihu.com/question/451320924/answer/2602594503)
      - 评价是否失败需要看该设计是否满足了当时的设计需求.
      - 第二代身份证 2003 年开始实施使用，其设计应该还要更早几年，那个年代个人电脑还远未普及，更遑论网络和智能手机。大部分需要填写身份证号的业务都是纸笔填写，人工收集后整理存放或者统一录入系统
      - 这一算法可以检测出身份证号中所有**有一个数填错了** 和 **相邻两位填反了** 的常见错误情形，对于两位以上的随机填写错误也有 90% 的检出概率，**使用任何小于 11 的除数都会削弱其有效性**。上述结论的推导可以参考上边的链接
      - 这种校验算法的应用非常简便，很容易开发出一种自带身份证号校验功能的计算器，方便基层业务员快速判断身份证号是否填写有误，从而避免使用第一代身份证时大量出现的身份证号错号问题
      - 但可惜的是，第二代身份证推出后，又经过了数年的换发工作才逐步取代一代证，此时个人电脑已经开始普及，读卡器淘汰掉了许多纸笔填写身份证号的场景；在一代身份证彻底退出历史舞台的 2013 年，移动互联网时代已然拉开帷幕，联网身份信息查询乃至人脸识别技术让校验码毫无用武之地，多出的一个字母 X 反而给各种信息化系统的设计与使用带来了麻烦。
      - 总而言之，身份证号的设计不能算是失败，其编码规则实际上可以说相当巧妙，结合了数论、统计方面的知识和对我国国情及基层工作模式的理解。只不过它的设计者没能预料到未来十年内我国信息产业的爆发式增长，各种良莠不齐的软件雨后春笋般占领了民众的日常生活，而这些软件的开发者并不都能编写“正确”处理身份证号的逻辑。这不能完全算是设计者的过失，毕竟即使是行业内的大佬，也很少有人能预言十年二十年后的世界会是怎样。
- 2022 年 8 月 11 日
  - 前端代码体积的日常
    - `欢乐向`
    - ![前端代码体积的日常](http://tva1.sinaimg.cn/large/007Yq4pTly1h52lykonxyj30eo0inwij.jpg)
  - [前端工程师的深度或者核心竞争力体现在哪里？-欲三更的回答](https://www.zhihu.com/question/263926959/answer/275947141)
    - `前端的难点`
    - 需要保持自己拥有硬编码的能力, 是无论什么需求都能不头疼不发愁，敢拍胸脯说“我给你做”的竞争力
    - 前端开发跟后端开发有一个非常不同的点，就是前端开发应用层的代码逻辑很容易就变得极其复杂，而后端的复杂逻辑主要集中在和业务正交的领域
    - 示例 1: 流程图编辑器
      - ![流程图编辑器](http://tva1.sinaimg.cn/large/007Yq4pTly1h534vxoqnvj30dw0dbac6.jpg)
      - > 基本共识:
        > 你懂 react，懂 vue，懂 redux，或者你做过多少个几百页面的“大项目”，对你实现上面这个东西有多大帮助？
        > 坦白讲，没有多大帮助。
      - 想实现这么个东西，应该怎么做呢？
      - 正常的思路是这样——首先按照业务逻辑，设计一个 model 描述整个图，这个 model 一般是树形结构，每一层包含若干节点，每个节点上包含若干连接点，另外还需要一个结构描述连线。
      - 大致是：graph - node - pin - connection 这样的层次关系。
      - 另外还有很多细节，比如四个泳道如何描述，不同的节点类型如何抽象；不同颜色的连线表示不同关系；以及如何处理注释框，如何处理联动，如何序列化/反序列化……一时半会儿说不全。如果加上界面逻辑，就更复杂了，位置，样式，拖动，事件，刷新，局部刷新（也许需要），context menu，undo，redo，等等。
      - 面对这样的需求，谈什么“前端数据流”，好像没多大意义。为什么？因为前端数据流是开发范式，实际上并不会帮你建立业务模型，不管依赖什么工具，模型总要你自己建立。那么如何建立模型，又如何使用代码合理的实现模型？没有什么黑科技，就是一点一点的写，抽丝剥茧，功力足够，你就能写出简洁有序抽象可复用的实现，功力不够，写个一千行就乱套了。
    - 示例 2: 复杂框图加实时数据展示加鼠标操作，简称组态
      - ![组态](http://tva1.sinaimg.cn/large/007Yq4pTly1h534yeqqywj30iw0an78o.jpg)
    - 示例 3 : 网页渲染 BIM
      - ![网页渲染CAD](http://tva1.sinaimg.cn/large/007Yq4pTly1h534z7q4yvj30hs09dabw.jpg)
    - 示例 4: 复杂联动表单
      - ![复杂联动表单](http://tva1.sinaimg.cn/large/007Yq4pTly1h534zunkqxj30dw09v758.jpg)
    - 你在一个平台上能写出那种打眼一看一时反应不过来该怎么写的程序，那你在任何平台上都有能力做到这一点，别让自己做的项目只有填充简历的功能，还要让它们给你背书。
  - [前端开发的难点到底在什么地方?-欲三更的回答](https://www.zhihu.com/question/275915023/answer/403127961)
    - `前端的难点`
    - ![监控器后台界面](http://tva1.sinaimg.cn/large/007Yq4pTly1h5351grlx9j30u00hewog.jpg)
    - 视频监控行业的客户端软件, 和微软 Office 比没什么难点, 但可以就此往下细问
      - 监控点位一多，对性能就有点要求。比如左边那个树形列表，item 超过十万的时候，如何保证不卡顿？如何在客户端做拼音检索保证性能？如何支持多音字？
      - 硬件对接。当你要对接超过 200 种监控设备，如何设计对接层？不同厂家的 sdk 底层依赖的都是海思的库，版本却不一致，怎么处理？某些厂家的 sdk 质量不受控如何处理？以及行业主流的平台和设备接入规范是什么样的？
      - 应用层协议栈。rtp，rtsp，sip，onvif，等等，都是什么？干什么用的？ps 流和 ts 流分别是什么？以及简单的视频编解码知识，霍夫曼编码和矢量预测简单聊聊？
      - 播放性能优化。16 路 1080p 或者 4 路 4k 预览导致掉帧，如何优化？sdl，opengl，directx 各自有什么优化技巧？
      - socket client 编写技术。断线重连怎么做？沾包是怎么回事儿？如何设计一个基于线程池和异步 io 的 socket client？
      - 交互逻辑实现。比如我把左边的监控点位拖进右边的视频窗口，这时候客户端会尝试连接，发请求获取数据并播放，这个过程肯定不能卡顿，要异步处理。以及，在这个过程中我又拖了另一个点位进去，如何 quit 掉前一个前一个任务，开启新的任务？任务队列了解一下？
      - 你看，一个这么 low 的东西，随便列列还有不少技术点可以聊呢。恐怕有一半的后端项目没这个复杂吧？这东西我做过三套，在 windows 上用 c++做过一套，在 linux 上用 qt 做过一套，用 libcef 和前端技术栈做过一套。三个功能几乎一模一样的项目，难度自然也是差不多的。你用 libcef 做也不会简单，只是开发效率高一点。
      - 可想而知，你要是想在网页上做个功能更复杂的应用（比如 [@于江水](https://www.zhihu.com/question/275915023/answer/383731107) 说的那套东西），那难度肯定比这个大的多。所以问题不在于前端不前端，而在于如果你只做 listview，那肯定前端简单。
  - [前端开发的难点到底在什么地方?-于江水在银河系的回答](https://www.zhihu.com/question/275915023/answer/383731107)
    - `前端的难点`
    - 前端逻辑复杂度主要在于数据 + UI + 交互的实现
    - 垂直领域解决方案很难
      - 切页面很简单, 但几十万个页面, 就不是前端/堆外包所能直接解决的了.
      - 所以我们有 TMS 等各种运营系统，前端切模块，运营自己设置图片、文案、组装成运营页面，想改自己在后台改不用麻烦前端。这一套系统是个比较庞大的工程，从模块规范、模块开发工具链、模块发布和版本管理、在线管理、在线可视化搭建、数据填写和数据源导入、页面生成和 CDN 同步等等，都需要前端架构师设计然后开发。设计这个系统是很难的。
      - 不同业务场景、特点，需要完全不同的前端解决方案，在开发这些垂直解决方案的时候，业务分析、技术选型、架构设计、开发落地是非常难的。
    - 总结
      - 前端本身业务逻辑、实现方式比较多样、复杂，技术选型、方案设计很难，这要求你对多种技术框架、工具都有一定的了解
      - 面对不同业务需求进行抽象、设计、研发以及关联系统的自主研发（跨技术栈）比较难
      - 将业务需求、交互设计、数据等糅合在一起开发出来展现给用户，跟多方沟通打交道比较难，良好的沟通需要多种领域的知识
- 2022 年 8 月 2 日
  - vscode 中的数据库客户端
    - MySQL
      - [皮皮仔-vscode 中的数据库浏览插件](https://marketplace.visualstudio.com/items?itemName=ppz.ppz)
      - [Github 源码](https://github.com/ppz-pro/ppz.vscode)
      - 作者是个人开发者, 可以轻量使用以处理不重要的数据. 重要数据库还是要用官方工具. 对于个人开发者的产品要小心意外风险
      - 但确实非常轻(vscode 插件, 可以随时查看), 也足够使用
    - MongoDB
      - [MongoDB for VS Code](https://marketplace.visualstudio.com/items?itemName=mongodb.mongodb-vscode)
      - MongoDB 官方出品
  - catchen 谈大厂中重要的事
    - `工作认知`
    - 原文: 我对大厂 senior+ 的程序员的期望是：你能够说清楚我们在解决什么用户问题、我们如何通过解决用户问题创造价值、我们如何把价值转化为利润。说不清楚这三件事情，技术品味没有意义，按照技术品味进行的取舍有可能不符合产品和业务应该进行的取舍，最后不能有效解决用户问题、不能盈利。对于熟练的大厂 senior+ 来说，其实哪有那么多东西需要在 code 里面 review 的。除去 CI 直接能定位的问题，我只关心几件事：你是否在解决正确的问题？你是否意识到问题所有的约束？约束冲突时你对它们的优先级排序是否跟业务利益一致？这三件事能说清楚的，没有写不好 code 的，写不好就转 PM 吧。
  - [我们是如何记录图片的](https://mp.weixin.qq.com/s/fZdKkp9VZgHq8nMT6PMBIQ)
    - `图片格式科普`
      - PBM（Portable BitMap）
        - 最早的图片格式, 纯文本, 只支持黑白两色, 通过 01 进行记录
        - 缺点是明文存储, 一个像素一个字节(0/1), 体积浪费很大
      - GIF(Graphics Interchange Format), 图像交换格式
        - 将支持的图片颜色限制为 256 种, 256 种颜色可以从整个 RGB 颜色空间中任选，它们构成一个调色板。GIF 的每个像素便是这个调色板（即颜色表）的索引
        - 具体每个像素的颜色可以从调色板中选, [但只有 256 种颜色可用](https://blog.shengbin.me/posts/art-of-gif)
        - 记录每一个像素的颜色, 然后使用 LZW 算法压缩, 以节约体积
        - 缺点: 专利收费(现已过期)
      - PNG(Portable Network Graphics), 便携式网络图片, 又称 PNG is Not GIF
        - 前向兼容
          - 标准制定式规定数据分为`关键数据块`和`辅助数据块`两类
          - PNG 解析器必须支持关键数据块的解析，而对于辅助数据块则是能识别就识别，不能识别可以忽略
          - 升级只针对辅助数据块
          - 因此, PNG 可以实现渐进增强和前向兼容
        - 算法和 GIF 类似, 使用颜色表存储颜色
          - PNG 8 => 颜色表体积为 2^8 => 256 种颜色, 和 GIF 一样
          - PNG 24 => 颜色表体积为 2^24 => 256(R) _ 256(G) _ 256(B) => 16777216 种颜色, 俗称真彩色
          - PNG 32 => PNG 24 + 8bits 透明色通道, 加了一种 A(alpha, 透明色), 效果更佳, 体积更大
        - 缺点
          - 霍夫曼编码 & LZW 算法特点 => 重复数据越高，压缩效率就越高
          - 但是, 如果图片复杂程度增加, 颜色本身就非常复杂且无规律 => 压缩效率大幅降低
          - 考虑到 PNG24 已经可以表示所有颜色, 可以将 PNG 视为图像无损压缩技术
      - JPEG(Joint Photographic Experts Group), 联合图像专家组
        - 实用主义策略: 面向人眼识别的有损压缩
          - 不使用 RGB 空间, 改为使用 YUV(Y => 亮度, Luma/Luminance, UV => 彩度/色调/饱和度, Chrominance 或 Chroma), 和 HSL(色相、饱和度、亮度/Hue, Saturation, Lightness)很接近
            - HSL 更接近于人眼对色彩的感受方式，因此更适合做渐变处理, 不会出现 RGB 颜色中, 某种成分简单变化, 导致视觉颜色出现大幅度变化的问题(每种成分对亮度贡献不同, 导致发生突变)
          - 人眼特点:
            - 人眼对于亮度的感受要高于色调和饱和度
            - 人眼对于在一定范围内的亮度差异较为敏感
              - 亮度为 10% & 20% 与 20% & 25% 可以区分
              - 亮度为 10% & 90% 与 20% & 80% 难以区分(哪个亮度差距更大)
            - 通过矩阵变换的技巧, 可以舍弃频域上的一些细节，这个过程被称为「量化」。这是 JPEG 有损压缩的最主要来源
            - ![亮度压缩-示例图](https://mmbiz.qpic.cn/mmbiz_png/3xDuJ3eiciblmns0icBibV3EZYP0goONzoX96PoZa2sFILbUZT3nDzkjAlicfAcNtWA5ycZd87TQj0swu3W6fEesM9g/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)
          - 对于通常看到的图片, JPEG 都能在合理地保证质量的前提下大幅压缩图像的尺寸，这尤其体现在一些「绘画作品」中，因为这些作品通常都有相对均匀的亮度。
            - ![艺术图-示例](https://mmbiz.qpic.cn/mmbiz_png/3xDuJ3eiciblmns0icBibV3EZYP0goONzoX9pLpWsW7yJiaZicM2hicib3caWu8w6j6FAF4MYI2nB0XVunC9L0eZedQzEg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)
              - 戴珍珠耳环的少女, 参考观摩: [小约翰可汗-骗一下纳粹二把手是怎样的体验？【硬核狠人 35】](https://www.bilibili.com/video/BV1Jr4y1G7gP?spm_id_from=333.999.0.0)
              - 由于`范米格伦`的伪作对`维米尔`作品鉴定师惨无人道的迫害, 导致这幅真迹也被判定为了伪作, 性质极为恶劣
      - WebP
        - 金声玉振
          - 压缩数据的原理: 数据「本身存在冗余信息」
          - 数据压缩的极限: 信息熵, 信息本身存在最小体积, 不能在 1bit 中传递 2bit 的信息
          - 从二进制编码->压缩算法->针对人眼模型部分舍弃, 还能更好一点吗...
          - 来自 mp4 的启发 => 将图片信息中更多的部分「变成冗余」
        - MP4/H.264 的特点
          - 只记录帧与帧之间的变化, 将视频大幅压缩 => 「运动补偿」
          - 「根据某个单元相邻的单元预测该单元的值，从而使视频文件只需要记录实际值和预测值的差值就足够了」 =>「帧内预测」
        - WebP
          - WebP 使用每个块上方的三个块和左侧的三个块进行预测，并且包含了 H.264 的四种帧内预测模式
          - 通过帧内预测实现了更多原始信息的冗余化
          - 同样使用了 PNG 中使用了的字典编码等等无损压缩技术，从而使图片的尺寸降到了尽可能低的程度
      - 展望
        - BPG
          - Web 就是旅行的终点了吗? 并不
          - 2013 年出现了 H.265 编码, 「High Efficiency Video Coding」，高效视频编码, HEVC 在 H.264 之上做了诸多改进，例如帧内预测就从 4 种模式上升到了 33 种！
          - BPG 使用了基于 HEVC 帧内预测算法的有损压缩，这意味着它的性能要显著领先于 JPEG 甚至 WebP。然而，由于 HEVC 与 H.264 一样保留版权，这也成为了 BPG 并没有大规模流行的主要原因。
        - [FLIF](https://github.com/FLIF-hub/FLIF)
          - 2015 年发布, 完全开源
          - 采用和 H.264 类似的一种动态学习的压缩算法, 在无损压缩方面将压缩性能优化到了新高度
          - 作为纯社区项目，FLIF 在发布后不久就逐渐式微，但其核心思路被 JPEG 的新标准 JPEG XL 继承，并且 JPEG XL 最终也在 2020 年作为免版税标准发布；BPG 和 FLIF 也最终启发了 MPEG，发布了基于 HEVC 的图片格式 HEIF
        - 2021 年起 Google 开始开发下一代 WebP，被称为 WebP 2, 基于 AV1 视频编码
        - AV1 是用以代替 H.265 的最新免版税标准
        - 时代还在进步中
          - 进阶: 为什么故事的主角都是外国的企业
            - 有效需求召唤实际供给, 销售市场决定产品命运
            - 放眼寰宇, 谁在视频推荐算法方面有实际需求
            - 回看自身, 谁在为 CDN 费用天天夜不能寐
            - [基于 AVS2 的图片容器——TPG：现状与改进之路](https://cloud.tencent.com/developer/article/1871646)
            - [OceanBase-海量记录,笔笔算数](https://www.oceanbase.com/)
            - 此处省略爱国主义教育 3000 字...
- 2022 年 8 月 1 日
  - [WSL 导入系统后, 更改默认进入的 uid](https://github.com/microsoft/WSL/issues/3974)
    - `神奇技巧`
    - 目前 WSL 官方没有提供直接配置入口, 想在输入 wsl 后直接以某身份进入(而非默认的 root), 需要修改注册表实现
    - `wsl -d <DistroName> -u <UserName> -e id -u`可以拿到 导入 wsl 的系统中目标账户的 uid, 为十进制值(一般为 1000)
    - 进入注册表, 修改`Registry::HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Lxss\{系统uuid}`下, `DefaultUid`项对应的值即可
- 2022 年 7 月 29 日
  - [sharp 作者提供的提问前待确认 todo](https://github.com/lovell/sharp/issues/3250)
    - `工作模板`
    - sharp 需要在安装时进行 c++构建, 因此经常会有各种神奇问题出现, 作者也是不胜其扰(使用 sharp 的开发者表示开发者看着报错也是非常痛苦), 因此提供了这套 issue 前提问.
    - 可以作为客服类项目的开发 demo
  - [体验度量专题｜易用度在企业级中后台产品的探索和实践](https://zhuanlan.zhihu.com/p/266728471)
    - `产品设计`
    - 出处: 阿里[antd 主页-资源-文章-2020-设计部分](https://ant.design/docs/resources-cn#%E6%96%87%E7%AB%A0)
    - 思路: 通过`易用度`考核技术类产品的效果
    - 易用度：使用**产品完成**工作的容易程度。
      - ![易用度量表](http://tva1.sinaimg.cn/large/007Yq4pTly1h4nmgpuratj30u00kj45m.jpg)
    - 易用度-满意度-尖叫度-推荐度衡量维度对比
      - ![易用度-满意度-尖叫度-推荐度衡量维度对比](http://tva1.sinaimg.cn/large/007Yq4pTly1h4nmi2ftnij30u00grgpc.jpg)
  - [谷歌出品: 前端性能监控指标介绍](https://web.dev/metrics/)
    - `仓鼠向`
    - 对常见前端页面性能指标的介绍. 做性能又花钱可以用一下
      - Time to First Byte (TTFB)
      - First Contentful Paint 首次内容绘制 (FCP)
      - Largest Contentful Paint 最大内容绘制 (LCP)
      - First Input Delay 首次输入延迟 (FID)
      - Time to Interactive 可交互时间 (TTI)
      - Total Blocking Time 总阻塞时间 (TBT)
      - Cumulative Layout Shift 累积布局偏移 (CLS)
      - Interaction to Next Paint (INP)
- 2022 年 7 月 28 日
  - 消息搜索技术调研
    1.  `端内消息搜索`
    2.  基本思路为: 如何在本地消息数据库中, 尽快找到和关键词匹配的前 n 条消息
    3.  那么, 数据库方案有 sqlite(FTS, Full Text Search, v3/v4/v5)/CLucene(和 ES 是一个底层)/Lucy 多种方案可选
    4.  此外, 还需要执行
        1.  分词器优化
        2.  引擎层优化
    5.  对应: Telegram 搜索似乎是在服务端进行
    6.  参考资料
        1.  微信 2013 年方案：http://www.52im.net/forum.php?mod=viewthread&tid=1132
        2.  网易云信方案：http://www.52im.net/forum.php?mod=viewthread&tid=3651
        3.  微信最新方案：http://www.52im.net/forum.php?mod=viewthread&tid=3839
  - js 事件循环机制示例图
    - `仓鼠向`
    - ![js 事件循环机制示例图](http:/3/tva1.sinaimg.cn/large/007Yq4pTgy1h4mp6taxogj317w0pk77p.jpg)
  - 调度算法评价指标
    - `仓鼠向`
    - 调度算法评价指标本身是操作系统里的基础知识, 业内也有非常完善的研究. 但调度系统模型可以和很多实际业务匹配起来, 例如: 当任务量过大时, im-sdk 如何执行任务舍弃逻辑, 以追求更好的体验
    - 进一步, 如何定义更好的体验, 在这时, 调度算法指标里的周转时间, 或者 P90 周转时间显然就是很好的指标
    - ![调度算法评价指标](http://tva1.sinaimg.cn/large/007Yq4pTly1h4msu45remj30z40og471.jpg)
- 2022 年 7 月 22 日

  - [tree shaking 问题排查指南](https://zhuanlan.zhihu.com/p/491391823)

    - `神奇bug`
    - TreeShaking 需要注意意外优化的情况

      - 对于以下代码
        ```js
        const obj = {};
        obj.name = "obj";
        export const answer = 42;
        ```
      - rollup 编译结果
        - `const answer = 42;export {answer};`
      - esbuild 编译结果
        - `const obj = {};obj.name = "obj";const answer = 42;export {answer};`
      - 看起来 rollup 正确的清除了冗余代码, 实际上在特殊情况下, rollup 的优化会导致出错

        ```js
        // 本来代码的意思是每次设置一个变量属性的时候，都要触发一次render，结果由于obj.name代码被删除，导致render没被触发，这明显改变了语义。
        function render(val) {
          console.log("render", val);
        }

        Object.defineProperty(Object.prototype, "name", {
          set(val) {
            render(val);
          },
        });
        ```

      - [issue 地址](https://github.com/evanw/esbuild/issues/2010)

- 2022 年 7 月 20 日
  - [effective-debugging-gitbook](https://celthi.github.io/effective-debugging-zh/introduction.html)
    - `仓鼠向`
    - 可以学习一下别人的调试方法, 待读
- 2022 年 7 月 17 日
  - [为什么平均值很烂，百分位数很棒](https://www.dynatrace.com/news/blog/why-averages-suck-and-percentiles-are-great/)
    - `统计学`
    - `监控`
    - 为什么 TP 指标优于平均数.
    - TP 可以表示系统整体的响应情况, 也不会受到尖峰值干扰
  - [tp90 和 tp99 是指什么性能指标，求大神解释下?-刘江的回答](https://www.zhihu.com/question/41110088/answer/109301700)
    - `统计学`
    - `监控`
    - TP=Top Percentile，Top 百分数，是一个统计学里的术语，与平均数、中位数都是一类。
    - TP50、TP90 和 TP99 等指标常用于系统性能监控场景，指高于 50%、90%、99%等百分线的情况。
- 2022 年 7 月 16 日
  - [总结了 14 种数据异常值检验的方法](https://mp.weixin.qq.com/s/UtnYJiNZB4_2_-2G1QI0Tg)
    - `统计学`
    - 14 中检测异常值的方法, 如果将来写监控系统, 制定错误指标监控依据时可以使用
    - 大概看了下, 基本看不懂, 有空可以专门看看统计学教科书
    - 学习本身也是一种享受/娱乐
      - 基于分布
        - 3sigma
        - z-score
        - boxplot
        - Grubbs 假设检验
      - 基于距离
        - KNN
      - 基于密度
        - LOF
        - COF
        - SOS
      - 基于聚类
        - DBCAN
      - 基于树
        - iForest
      - 基于降维
        - PCA
        - AutoEncoder
      - 基于分类
        - One-Class SVM
      - 基于预测
        - Moving Agerage(移动平均)
        - ARIMA
- 2022 年 7 月 15 日
  - [函数式组件与类组件有何不同？](https://overreacted.io/zh-hans/how-are-function-components-different-from-classes/)
    - `优秀博文&争议问题终结者`
    - 面试时被问到了这个问题, 正好看到了这篇博文. 博文本身只是简单说, 函数组件相较于类组件, 最大的优势是默认避免了`this`指向不确定的问题, 并举了相关例子. 这个回答一般, 但有一点是面试官所不能反驳的: 文章作者是`Dan Abramov`, redux 作者, 另一个身份是`React Conf 2018`上 hooks 功能的介绍人(没猜错的话应该也是实际开发者)
    - `欢迎反驳, 若意见不一, 以我为准`
    - 另一个发现是作者的博客欢迎大家为博文提供各语言的翻译版本. 我用谷歌翻译试翻译了下, 感觉没什么问题, 后续可以集中提 PR
- 2022 年 7 月 12 日
  - [带你入门前端工程](https://github.com/woai3c/introduction-to-front-end-engineering)
    - `仓鼠`
    - 对前端工程的概要性介绍, 仅作收藏, 并没有实际查看
  - [深入理解 TypeScript](https://jkchao.github.io/typescript-book-chinese/)
    - `仓鼠`
    - 对 TS 的深入理解. 等找到工作后认真看下
  - [为什么 2021 年浏览器依然不能很好地复制动图?--紫云飞的回答](https://www.zhihu.com/question/460459199/answer/1899218661)
    - `冷知识`
    - 解释常见现象的同时, 提供了一种查看剪切板内容的思路
    - 代码地址: (使用了永久保存技术, 点击[查看源代码](view-source:https://web.archive.org/web/20220713022146/https://a1.alicdn.com/clipboard-viewer.html))
- 2022 年 7 月 11 日
  - [为什么最难不过二叉树的算法出现在面试题中都会被应聘者抱怨？- Cat Chen 的回答](https://www.zhihu.com/question/23105514/answer/23723939)
    - `面试`
    - 面试不是用来考察你懂不懂什么的，而是用来考察你有没有解决问题的能力的，以及将来和你一起解决问题是否容易
    - 正确的面试方式是这样子的：现在你来我这里面试，我就告诉你我们在做一辆车子的原型，现在少了一个轮子问你怎么办。没错，我就是要让你重新发明轮子。谁不知道楼下 7-11 有轮子卖，但我就想知道你会如何解决没有轮子的问题。
    - 我不指望你一开始能够给我一个轮子，我也知道外面卖的轮子很便宜，但我需要验证你有没有遇到问题后解决问题的能力，这包括思维和动手两方面。在这个比喻的基础上，我们可以来探讨一下面试过程中遇到的各种面试者。
    - 最后从面试官的角度来说，面试 ACM/ICPC 竞赛选手往往都很无聊。他们能够给出一个完美的轮子，但我不觉得我能从他们身上学到新东西。（面试过足够多的人后，要见到一个比已知完美轮子更完美的轮子其实非常难。）
    - 更有趣的面试者会说，「你知道吗，其实中国古代独轮手推车的轮子设计得比古罗马战车的轮子要合理」。其实我不知道你在说什么，但如果你能够把整套理论说得自圆其说的话我觉得你至少有点思维能力，同时你还真的对轮子感兴趣。事后我可能会去搜索一下看看你说的理论是否正确，但至少我会学到点新东西。
- 2022 年 7 月 10 日
  - [越老越吃香岗位的共同点](https://www.zhihu.com/question/532295301/answer/2483608879)
    - `工作认知`
    - 所谓越老越吃香的岗位，都有几个共同点
      1. 面对的问题比较固定，变化缓慢
      2. 面对的问题是永远无法根治，只能缓解的问题
      3. 解决问题的过程中，经验占比超过知识
- 2022 年 7 月 9 日
  - [leetcode 分类总结](https://lefttree.gitbooks.io/leetcode-categories/content/index.html)
    - `刷题`
    - 按照解题思路对 leetcode 进行归类, 用于 hack 面试时的最后一道算法题
  - [谈谈工作中的犯错](https://catcoding.me/p/avoid-mistake/)
    - `业务`
    - 介绍业务中影响比较大的错误.
    - `信息泄漏`/`退款接口(重复调用)`/`并发问题`/`配置错误`/
    - `错误是个人和团队最好的学习、提高的机会，而且我们已经交了学费。`
    - 对于业务, 需要考虑`防御式编程`, 同时, 也要注意开发成本的控制
    - 经验总结
      - 安全是第一位的，我们在工作中对敏感信息、公司资产要有一定的安全意识。完全按照公司的安全准则来工作，否则提桶跑路可能是小事，被追究法律责任就麻烦了。
      - 任何线上操作都是危险的，如非必要不要进行手动的线上操作。操作的时候尽量慢，然后想清楚如果错了如何恢复。比如删东西尽量软删除，把要删的东西移动目录或者设置状态。
      - 如果一个动作是有危险的，应该思考如何把这动作自动化，如果是必须有人给输入，那需要一定的流程来进行 Review 和批准。
      - 微软还有个好实践就是所有的线上命令，如果是写入型的命令默认不能运行，需要手动地运行命令提升权限。
      - 运维方面，如果有条件和时间尽量往 Infrastructure as Code 方向上靠，减少人工进行操作。
- 2022 年 7 月 4 日
  - [编程语言：类型系统的本质](https://mp.weixin.qq.com/s/j7ljExrt_poSEuPYbr9AYQ)
    - `编程语言`
    - 通过类型系统, 实现编程正确性证明
    - 可以作为兴趣进行了解, 工作中用处不大, 但很有意思.
  - [web 前端面试 - 面试官系列](https://vue3js.cn/interview/)
    - `前端面试-题库`
    - 类似八股, 但好处是属于明牌, 用来对自己查缺补漏也可以
    - 当然更希望的是实际理解这些题目的含义, 而非简单背题.
- 2022 年 6 月 28 日
  - Taro3 跨端跨框架原理初探, https://mp.weixin.qq.com/s/CO92HJjhsP97cXwEBMPGUA
    - `小程序原理`
    - 对 react-reconciler 应用原理, web-component 组件库选择方案, 以及对 react 的适配
  - 书摘
    - `人工智能`
    - 只有在莱特兄弟停止模仿鸟并开始使用风洞且开始了解空气动力学后后，对『人工飞行』的追求才获得成功。航空工程的教材不会把其领域目标定义为制造『能完全像鸽子一样飞行的机器，以致他们可以骗过其他真鸽子』
    - `人工智能:一种现代的方法`解释为什么人工智能领域研究者全力研究智能的基本原理，而非致力于通过图灵测试
  - 面试
    - 前端早早聊, C8-9 额台-如何考察候选人的能力与潜力
    - 三面时会问:
      - 产品的业务模式是什么
      - 背后技术的整体架构是什么，你在这里边扮演了什么角色
      - 你的位置，你做了什么事情
      - 然后会结合他的回答，往里面挖
      - 你在 XX 这里遇到了什么问题，解决了什么问题，沉淀了什么东西
      - 如果碰到了候选人没考虑到的事，那么会问
      - 假设我给你提了这么一个要求，你会怎么考虑这个问题，怎么制定技术的解决方案
      - 借此观察候选人怎么思考这个问题，怎么分解，怎么找到问题中的关键点
      - 结合关键点怎么设计技术架构，怎么推动落地，在推动落地的过程中，考虑到质量，效率，团队协作这些问题
      - 三面面试官会仔细看前两面的面试记录，对于已问过的问题不再问，改为以候选人层级+1 的难度提问，以确认候选人的潜力，考察他思考未知问题的思维方式，来判断他未来往下一层级成长的潜力
      - 我在这个职位未来一年/三年的责任是什么
      - 你对我有什么期望
- 2022 年 6 月 26 日
  - https://www.zhihu.com/question/61131777/answer/2545197189, 为什么在中国只有一个时区，但是却有很多的时区代码？
    - `编程冷知识`
    - 在 java6 中, 对上海时区(Asia/Shanghai)而言, `1927-12-31 23:54:07` 和 `1927-12-31 23:54:08` 不是相差 1, 而是相差 353
      - 源代码
        ```java
        // via https://stackoverflow.com/questions/6841333/why-is-subtracting-these-two-times-in-1927-giving-a-strange-result
        public static void main(String[] args) throws ParseException {
            SimpleDateFormat sf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
            String str3 = "1927-12-31 23:54:07";
            String str4 = "1927-12-31 23:54:08";
            Date sDt3 = sf.parse(str3);
            Date sDt4 = sf.parse(str4);
            long ld3 = sDt3.getTime() /1000;
            long ld4 = sDt4.getTime() /1000;
            // output => 353
            System.out.println(ld4-ld3);
         }
        ```
      - 原因是 1928 年民国对上海时区进行了调整, 上海时区往前调整了 5:52，所以时钟上相邻的 1 秒实际间隔 353 秒.
      - js 中该值正常, 估计是时区数据库没有那么详细.
        - 但仍然可以找到反直觉行为, 相关测试代码为
        ```js
        let time_1 = new Date("1986-05-04 02:00:00");
        let time_2 = new Date("1986-05-04 03:00:00");
        // output => 0
        console.log(time_1.valueOf() - time_2.valueOf());
        ```
        - 原因在这里
          - ![中共中央办公厅、国务院办公厅关于在全国范围内实行夏时制的通知-中办发〔1986〕12号-1986年4月12日](http://tva1.sinaimg.cn/large/007Yq4pTly1h3ld7is0dlj30kk0zjtph.jpg)
    - 解决方法是尽量选择正确的时区来处理时间数据, 剩下的交给专业时区数据库进行处理
      - 例如: 这个库 https://github.com/eggert/tz/blob/0e8f0b06ac2f65d0c54a91121da09c8662cd88e6/asia?utm_oi=26676952039424#L664
  - https://zhuanlan.zhihu.com/p/533850515 利用 shields.io 构造带数字的 Github 图片
    - `开发小工具`
    - 构造出的图片地址 https://img.shields.io/badge/dynamic/json?label=citationCount&query=citationCount&url=https%3A%2F%2Fapi.semanticscholar.org%2Fgraph%2Fv1%2Fpaper%2Fabd1c342495432171beb7ca8fd9551ef13cbd0ff%3Ffields%3DcitationCount
      - 实际请求内容 => label=citationCount&query=citationCount&url=https://api.semanticscholar.org/graph/v1/paper/abd1c342495432171beb7ca8fd9551ef13cbd0ff?fields=citationCount
    - 效果示例: ![效果](https://img.shields.io/badge/dynamic/json?label=citationCount&query=citationCount&url=https%3A%2F%2Fapi.semanticscholar.org%2Fgraph%2Fv1%2Fpaper%2Fabd1c342495432171beb7ca8fd9551ef13cbd0ff%3Ffields%3DcitationCount)
- 2022 年 6 月 24 日
  - https://www.zhihu.com/question/25539382/answer/539557939
    - `密码学`
    - 介绍了一些密码学可以实现的神奇效果以及对应的关键字:
      1. A 可以向 B 证明自己拥有一个密码，但是如果 B 是假冒的验证者，A 不会透露关于密码的任何信息给 B。——`零知识证明`
      2. A 可以和 B 比较自己持有的一个值的大小关系，而不泄露这个值给对方。——`百万富翁问题`
      3. A 可以给 B 发来的一段信息进行电子签名，而不知道信息的内容。——`盲签名`
      4. A 和 B 可以，在没有公正第三人的情况下，进行等概率胜负的博弈。——`电子博弈`(又称 `公平掷币协议` )
      5. 邮件服务，如果不考虑法律风险的话，是可以做到让服务器看不到你的邮件内容的。——PGP
      6. 不可能破解
         1. 破解 4096 位 RSA 是困难的。——即使用超算也如此。
         2. 破解 256 位 AES 是困难的。——即使用量子计算也如此。
         3. 破解 OTP 系统是困难（划掉）不可能的。——即使天顶星人来了也如此。
      7. 公开的安全算法才是可信的算法
         1. 一个好的加密算法真的应该是公开的——它可以接受更多人的检验。
         2. 一个好的密码系统不一定是公开的——但是它应该按照可以公开除了密码之外的一切而依旧安全来设计。
      8. 可以实现这样的算法，使得班干部中的任何一个均可以以班委会的名义下达通知，且其他人，除了班长之外，都不知道具体下达者。
         - 我理解可以这样设计
           1. 班委本身有对外的公钥私钥体系, 公钥公开, 因此所有人都可以验证消息来自班委
           2. 班委本身私钥不公开, 部署在服务器上, 只有班长可以登录
           3. 班委成员向班委服务器提交公钥, 服务器只允许认证过的班委成员调用私钥发送消息(期间私钥不对外展示)
           4. 对外表现为: 每一个班委成员都可以以班委的身份发送消息, 除了班长在中间可以看到该消息提供方的公钥签名外, 他人只能看到班委在发送消息, 而不知道具体的发送者
      9. 密码系统的安全性取决于最弱的一环……当年是谁说的`只用 https 保护登录界面就够了`的来着…你的 token 也会被盗
         1. 参考著名漫画: [绝对安全的加密方法……](https://mp.weixin.qq.com/s/ggxNrLQ0au-pK06dN2KUcA)
      10. 大多数密码系统都不是被正面攻破的…而是实现过程中出了差错…
      11. 以上内容，真的，真的，在大多数的密码学教材上都能找到——甚至还有用到的一些算法安全性的数学证明…
  - 在这个回答下的评论(来自@invalid s)
    - 提问: 请问前端如何实现两次发的密码 hash 值不同的？是要怎么加盐么？或者推荐个简明教材也好，多谢楼主
    - 作者回复:[w2014](https://www.zhihu.com/people/w2014-66)就是客户端向服务器申请登录时，服务器给客户端提供一个随机的 salt，而客户端把密码加 salt 做 hash 之后提交给服务器…因为不同次登录拿不到同样的 salt，所以 hash 结果就不一样了……
    - [invalid s](https://www.zhihu.com/people/s.invalid)回复
      - 简单说，这叫`挑战-应答`模式。
      - 服务器知道 MD5（用户密码+盐），它就可以向用户发出`挑战`——你说你是 alice，那么，你的密码、拼上我发过去的盐，算出 MD5 后，再拼上服务器的当前时间 xx 年 xx 月 xx 日 x 时 x 分 x 秒，然后再算一次 MD5：现在，告诉我这个 MD5！
      - 现在，随便谁，哪怕你全程监控着双方的通信，也不可能知道这个服务器和用户都知道的 MD5（用户密码+盐） 是多少。因为它从来就不曾在线路上出现过，只有真正的服务器和真正的用户才知道、才能计算出这个最终的 MD5、才能确认这个最终 MD5 是否正确。
      - 这就是所谓的挑战-应答模式。
      - 事实上，oauth2 认证、你登录网络游戏用的电子令牌，它们都是这个原理。
  - 作者推荐了 结城浩的[图解密码技术](https://book.douban.com/subject/26822106/)作为入门读物
