<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="914px" preserveAspectRatio="none" style="width:451px;height:914px;background:#FFFFFF;" version="1.1" viewBox="0 0 451 914" width="451px" zoomAndPan="magnify"><defs><filter height="300%" id="f1dkl17cc34pck" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="126" x="159" y="32.6279">启动微信小程序</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="28" x2="28" y1="81.7031" y2="868.791"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="121.5" x2="121.5" y1="81.7031" y2="868.791"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="409" x2="409" y1="81.7031" y2="868.791"/><rect fill="#FEFECE" filter="url(#f1dkl17cc34pck)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="42" x="5" y="43.583"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="12" y="66.627">用户</text><rect fill="#FEFECE" filter="url(#f1dkl17cc34pck)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="42" x="5" y="867.791"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="12" y="890.835">用户</text><rect fill="#FEFECE" filter="url(#f1dkl17cc34pck)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="53" x="93.5" y="43.583"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="100.5" y="66.627">Native</text><rect fill="#FEFECE" filter="url(#f1dkl17cc34pck)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="53" x="93.5" y="867.791"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="100.5" y="890.835">Native</text><rect fill="#FEFECE" filter="url(#f1dkl17cc34pck)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="56" x="379" y="43.583"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="386" y="66.627">服务器</text><rect fill="#FEFECE" filter="url(#f1dkl17cc34pck)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="56" x="379" y="867.791"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="386" y="890.835">服务器</text><rect fill="#EEEEEE" filter="url(#f1dkl17cc34pck)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="444" x="0" y="113.5803"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="444" y1="113.5803" y2="113.5803"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="444" y1="116.5803" y2="116.5803"/><rect fill="#EEEEEE" filter="url(#f1dkl17cc34pck)" height="25.7544" style="stroke:#000000;stroke-width:2.0;" width="70" x="187" y="101.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="56" x="193" y="120.6011">首次启动</text><polygon fill="#A80036" points="110,157.2119,120,161.2119,110,165.2119,114,161.2119" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28" x2="116" y1="161.2119" y2="161.2119"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="35" y="156.3555">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="46" y="156.3555">进入页面</text><polygon fill="#A80036" points="397,188.9663,407,192.9663,397,196.9663,401,192.9663" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="122" x2="403" y1="192.9663" y2="192.9663"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="129" y="188.1099">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="140" y="188.1099">传入app_id, 请求小程序静态资源</text><polygon fill="#A80036" points="133,220.7207,123,224.7207,133,228.7207,129,224.7207" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="127" x2="408" y1="224.7207" y2="224.7207"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="139" y="219.8643">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="150" y="219.8643">返回静态资源配置</text><polygon fill="#A80036" points="397,252.4751,407,256.4751,397,260.4751,401,256.4751" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="122" x2="403" y1="256.4751" y2="256.4751"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="129" y="251.6187">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="140" y="251.6187">下载静态资源</text><polygon fill="#A80036" points="133,284.2295,123,288.2295,133,292.2295,129,288.2295" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="127" x2="408" y1="288.2295" y2="288.2295"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="139" y="283.373">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="150" y="283.373">返回静态资源文件</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="122" x2="164" y1="319.9839" y2="319.9839"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="164" x2="164" y1="319.9839" y2="332.9839"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="123" x2="164" y1="332.9839" y2="332.9839"/><polygon fill="#A80036" points="133,328.9839,123,332.9839,133,336.9839,129,332.9839" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="129" y="315.1274">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="140" y="315.1274">校验静态资源文件完整性</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="122" x2="164" y1="364.7383" y2="364.7383"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="164" x2="164" y1="364.7383" y2="377.7383"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="123" x2="164" y1="377.7383" y2="377.7383"/><polygon fill="#A80036" points="133,373.7383,123,377.7383,133,381.7383,129,377.7383" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="129" y="359.8818">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="140" y="359.8818">解包静态资源文件</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="122" x2="164" y1="409.4927" y2="409.4927"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="164" x2="164" y1="409.4927" y2="422.4927"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="123" x2="164" y1="422.4927" y2="422.4927"/><polygon fill="#A80036" points="133,418.4927,123,422.4927,133,426.4927,129,422.4927" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="129" y="404.6362">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="140" y="404.6362">启动v8引擎, 运行js</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="122" x2="164" y1="454.2471" y2="454.2471"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="164" x2="164" y1="454.2471" y2="467.2471"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="123" x2="164" y1="467.2471" y2="467.2471"/><polygon fill="#A80036" points="133,463.2471,123,467.2471,133,471.2471,129,467.2471" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="129" y="449.3906">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="140" y="449.3906">启动webview, 渲染dom</text><polygon fill="#A80036" points="39,495.0015,29,499.0015,39,503.0015,35,499.0015" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="33" x2="121" y1="499.0015" y2="499.0015"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="45" y="494.145">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="63" y="494.145">启动完成</text><rect fill="#EEEEEE" filter="url(#f1dkl17cc34pck)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="444" x="0" y="528.8787"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="444" y1="528.8787" y2="528.8787"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="444" y1="531.8787" y2="531.8787"/><rect fill="#EEEEEE" filter="url(#f1dkl17cc34pck)" height="25.7544" style="stroke:#000000;stroke-width:2.0;" width="70" x="187" y="517.0015"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="56" x="193" y="535.8994">二次启动</text><polygon fill="#A80036" points="110,572.5103,120,576.5103,110,580.5103,114,576.5103" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28" x2="116" y1="576.5103" y2="576.5103"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="35" y="571.6538">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="53" y="571.6538">进入页面</text><polygon fill="#A80036" points="397,604.2646,407,608.2646,397,612.2646,401,608.2646" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="122" x2="403" y1="608.2646" y2="608.2646"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="129" y="603.4082">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="147" y="603.4082">传入app_id, 请求小程序静态资源</text><polygon fill="#A80036" points="133,636.019,123,640.019,133,644.019,129,640.019" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="127" x2="408" y1="640.019" y2="640.019"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="139" y="635.1626">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="157" y="635.1626">返回静态资源配置</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="122" x2="164" y1="671.7734" y2="671.7734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="164" x2="164" y1="671.7734" y2="684.7734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="123" x2="164" y1="684.7734" y2="684.7734"/><polygon fill="#A80036" points="133,680.7734,123,684.7734,133,688.7734,129,684.7734" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="129" y="666.917">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255" x="147" y="666.917">校验本地静态资源文件完整性, 使用本地缓存</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="122" x2="164" y1="716.5278" y2="716.5278"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="164" x2="164" y1="716.5278" y2="729.5278"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="123" x2="164" y1="729.5278" y2="729.5278"/><polygon fill="#A80036" points="133,725.5278,123,729.5278,133,733.5278,129,729.5278" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="129" y="711.6714">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="147" y="711.6714">解包静态资源文件</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="122" x2="164" y1="761.2822" y2="761.2822"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="164" x2="164" y1="761.2822" y2="774.2822"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="123" x2="164" y1="774.2822" y2="774.2822"/><polygon fill="#A80036" points="133,770.2822,123,774.2822,133,778.2822,129,774.2822" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="129" y="756.4258">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="147" y="756.4258">启动v8引擎, 运行js</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="122" x2="164" y1="806.0366" y2="806.0366"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="164" x2="164" y1="806.0366" y2="819.0366"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="123" x2="164" y1="819.0366" y2="819.0366"/><polygon fill="#A80036" points="133,815.0366,123,819.0366,133,823.0366,129,819.0366" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="129" y="801.1802">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="147" y="801.1802">启动webview, 渲染dom</text><polygon fill="#A80036" points="39,846.791,29,850.791,39,854.791,35,850.791" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="33" x2="121" y1="850.791" y2="850.791"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="45" y="845.9346">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="63" y="845.9346">启动完成</text><!--MD5=[4a9997274348f423778410d828350094]
@startuml

autonumber

title: 启动微信小程序

==首次启动==

用户- -> Native : 进入页面
Native- -> 服务器 : 传入app_id, 请求小程序静态资源
服务器 - -> Native : 返回静态资源配置
Native- -> 服务器 : 下载静态资源
服务器 - -> Native : 返回静态资源文件
Native - -> Native : 校验静态资源文件完整性
Native - -> Native : 解包静态资源文件
Native - -> Native : 启动v8引擎, 运行js
Native - -> Native : 启动webview, 渲染dom
Native - -> 用户: 启动完成

==二次启动==

用户- -> Native : 进入页面
Native- -> 服务器 : 传入app_id, 请求小程序静态资源
服务器 - -> Native : 返回静态资源配置
Native - -> Native : 校验本地静态资源文件完整性, 使用本地缓存
Native - -> Native : 解包静态资源文件
Native - -> Native : 启动v8引擎, 运行js
Native - -> Native : 启动webview, 渲染dom
Native - -> 用户: 启动完成


@enduml

PlantUML version 1.2021.7(Sun May 23 20:40:07 CST 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>